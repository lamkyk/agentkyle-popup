<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Chat with AI Agent Kyle</title>

  <!-- LATO FONT IMPORT -->
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght=300;400;700;900&display=swap" rel="stylesheet">

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #f7f7f7;
      font-family: 'Lato', sans-serif;
      font-size: 12px;
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Chat Shell (Apple Card Style) */
    .shell {
      width: min(420px, 100vw - 24px);
      height: min(640px, 100vh - 40px);
      background: #ffffff;
      border-radius: 26px;
      box-shadow: 0 18px 45px rgba(0,0,0,0.18);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* Header */
    .header {
      padding: 14px 18px;
      border-bottom: 1px solid #e6e6e6;
      background: #fafafa;
    }

    .title {
      font-size: 15px;
      font-weight: 900; /* Lato Black */
      color: #111;
    }

    .subtitle {
      margin-top: 3px;
      font-size: 12px;
      color: #666;
    }

    /* Chat Body */
    #chatBody {
      flex: 1;
      padding: 12px 16px;
      overflow-y: auto;
      background: #f2f2f7;
    }

    .msg-row {
      display: flex;
      margin-bottom: 10px;
    }

    .msg-user {
      justify-content: flex-end;
    }

    .msg-bot {
      justify-content: flex-start;
    }

    .bubble {
      max-width: 78%;
      padding: 10px 12px;
      border-radius: 16px;
      font-size: 12px;
      white-space: pre-wrap;
      line-height: 1.45;
    }

    .bubble-user {
      background: #dbe7ff;
      color: #111;
      border-bottom-right-radius: 6px;
    }

    .bubble-bot {
      background: #ffffff;
      border: 1px solid #e6e6e6;
      color: #333;
      border-bottom-left-radius: 6px;
    }

    .meta {
      font-size: 11px;
      color: #888;
      margin-bottom: 6px;
      text-align: left;
    }

    /* Input Area */
    #inputBar {
      display: flex;
      padding: 10px;
      border-top: 1px solid #e6e6e6;
      background: #fff;
      gap: 8px;
      align-items: flex-end;
    }

    #input {
      flex: 1;
      height: auto;
      min-height: 36px;
      max-height: 80px;
      border-radius: 8px;
      border: 1px solid #ddd;
      padding: 8px 10px;
      font-size: 12px;
      font-family: 'Lato', sans-serif;
      outline: none;
      resize: none;
    }

    #sendBtn {
      padding: 8px 14px;
      border-radius: 8px;
      background: #007aff;
      color: white;
      font-size: 12px;
      font-weight: 700;
      border: none;
      cursor: pointer;
    }

    #sendBtn:hover {
      background: #0063d6;
    }

    @media (max-width: 480px) {
      .shell {
        width: 100vw;
        height: 100vh;
        border-radius: 0;
      }
    }
  </style>
</head>

<body>
<div class="shell">
  <!-- Header -->
  <div class="header">
    <div class="title">Chat with AI Agent Kyle</div>
    <div class="subtitle">Interview-ready answers based only on Kyle Lam’s resume.</div>
  </div>

  <!-- Chat Body -->
  <div id="chatBody"></div>

  <!-- Input Bar -->
  <div id="inputBar">
    <textarea id="input" placeholder="Ask about Kyle's experience, strengths, or role fit..."></textarea>
    <button id="sendBtn">Send</button>
  </div>
</div>


<script>
/* ------------------ Resume Knowledge Base ------------------ */

const summary = {
  overview:
    "Kyle Lam is a systems-minded operator with 6+ years in SaaS and B2B2C customer success and several years in the autonomous vehicle space focused on systems engineering testing.",
  strengths: [
    "Designing and executing structured testing programs for complex systems.",
    "Partnering cross-functionally across engineering, ops, and vendor teams.",
    "Turning operational data into clear narratives and recommendations.",
    "Owning enterprise customer relationships and renewals in SaaS contexts."
  ]
};

const roles = [
  {
    id: "waymo_sse",
    title: "Sr. Systems Engineering Test Conductor",
    org: "Waymo",
    location: "Mountain View, CA",
    situation:
      "Waymo needed reliable ways to validate next-generation sensors and AV behavior before expanding ODD and rider operations.",
    task:
      "Kyle designed and executed structured test campaigns to ensure systems met performance and safety thresholds.",
    actions: [
      "Developed and executed test plans for new sensors and behaviors.",
      "Collaborated with engineers, PMs, and vendors to define metrics.",
      "Created dashboards for forecasting, burndown, and capacity planning.",
      "Authored SOPs and training materials for consistent testing execution."
    ],
    results: [
      "Unblocked deployments through critical scenario generation.",
      "Improved throughput and predictability of testing milestones.",
      "Raised overall quality and consistency of AV testing programs."
    ],
    keywords: ["waymo", "sensor", "av", "autonomous", "system", "testing", "validation"]
  },

  {
    id: "waymo_ops",
    title: "Autonomous Vehicle Instructor / Rider Operational Readiness",
    org: "Waymo",
    location: "Mountain View, CA",
    situation:
      "Waymo was preparing to scale rider operations and needed reliable operators to validate UX and operational workflows.",
    task:
      "Kyle executed structured on-road test cases while capturing high-quality UX and operations feedback.",
    actions: [
      "Ran real-world rider scenarios and logged behaviors and UX gaps.",
      "Partnered with rider support, dispatch, and UX teams for insights.",
      "Mentored operator cohorts on safety standards and structured testing."
    ],
    results: [
      "Improved operational readiness ahead of rider program expansion.",
      "Strengthened cross-team handoffs with structured feedback."
    ],
    keywords: ["rider", "operations", "instructor", "on-road", "ux"]
  },

  {
    id: "narvar",
    title: "Enterprise Customer Success Manager",
    org: "Narvar",
    location: "San Francisco, CA",
    situation:
      "Major retail brands depended on Narvar for post-purchase experiences and needed a strong CS owner.",
    task:
      "Kyle managed enterprise accounts, driving adoption, alignment, and measurable ROI.",
    actions: [
      "Led onboarding and QBRs with senior stakeholders.",
      "Coordinated with product/engineering on feature configuration.",
      "Identified upsell opportunities tied to business value."
    ],
    results: [
      "Retained core accounts and protected revenue.",
      "Enabled seamless migrations to advanced platform capabilities."
    ],
    keywords: ["saas", "customer success", "retail", "enterprise"]
  },

  {
    id: "nasdaq",
    title: "Service Account Manager",
    org: "Nasdaq",
    location: "San Francisco, CA",
    situation:
      "Nasdaq needed reliable account management for a diverse book of listed corporate clients.",
    task:
      "Kyle owned renewals, service coordination, and consultative relationship management.",
    actions: [
      "Acted as main point of contact for corporate accounts.",
      "Led executive business reviews translating metrics to insights.",
      "Partnered with product, operations, and legal to meet SLAs."
    ],
    results: [
      "Supported retention of recurring revenue.",
      "Generated incremental revenue through consultative upsells."
    ],
    keywords: ["nasdaq", "account", "corporate", "service", "capital markets"]
  }
];

const skills = [
  "Testing and validation of complex systems.",
  "Program and project management.",
  "SaaS customer success and enterprise account management.",
  "Stakeholder management and cross-functional execution.",
  "JIRA/JQL, SQL, HTML, dashboards and tooling.",
  "Linux, macOS, and internal CMS systems."
];

/* ------------------ STAR ENGINE ------------------ */

function tokenize(text) {
  return text
    .toLowerCase()
    .split(/[^a-z0-9]+/)
    .filter(Boolean);
}

const STOP = new Set([
  "the","and","for","with","that","this","from","into","about","have","has",
  "had","been","more","than","role","what","does","did","you","your","his",
  "her","their","how","many","years","tell","me","can","who","where","when",
  "why","are","was","will","would","could","should","do","on","in","at","to",
  "of","a","an","as","by","or","it","is","be","based","using"
]);

function extractKeywords(q) {
  return tokenize(q).filter(w => w.length > 2 && !STOP.has(w));
}

function scoreRole(role, kw) {
  const blob = (
    role.title + " " +
    role.org + " " +
    role.situation + " " +
    role.task + " " +
    role.actions.join(" ") + " " +
    role.results.join(" ")
  ).toLowerCase();

  let s = 0;
  for (const k of kw) {
    if (blob.includes(k)) s++;
    if (role.keywords.includes(k)) s++;
  }
  return s;
}

function buildAnswer(q) {
  const kw = extractKeywords(q);

  if (kw.length === 0) {
    return (
      "Here is a quick overview:\n\n" +
      "• " + summary.overview + "\n\n" +
      "Strengths:\n" +
      summary.strengths.map(s => "• " + s).join("\n")
    );
  }

  const matches = roles
    .map(r => ({ role: r, score: scoreRole(r, kw) }))
    .filter(r => r.score > 0)
    .sort((a,b) => b.score - a.score);

  if (matches.length === 0) {
    return (
      "The resume does not directly mention that, but in general Kyle brings:\n\n" +
      skills.map(s => "• " + s).join("\n")
    );
  }

  const best = matches[0].role;

  return (
    `${best.title} at ${best.org} (${best.location})\n\n` +
    `Situation: ${best.situation}\n\n` +
    `Task: ${best.task}\n\n` +
    `Action:\n` +
    best.actions.map(a => "• " + a).join("\n") +
    `\n\nResult:\n` +
    best.results.map(r => "• " + r).join("\n")
  );
}

/* ------------------ Chat UI Logic ------------------ */

const chatBody = document.getElementById("chatBody");
const input = document.getElementById("input");
const sendBtn = document.getElementById("sendBtn");

function addMsg(type, text) {
  const row = document.createElement("div");
  row.className = "msg-row " + (type === "user" ? "msg-user" : "msg-bot");

  const bubble = document.createElement("div");
  bubble.className = "bubble " + (type === "user" ? "bubble-user" : "bubble-bot");
  bubble.textContent = text;

  row.appendChild(bubble);
  chatBody.appendChild(row);
  chatBody.scrollTop = chatBody.scrollHeight;
}

function addMeta(text) {
  const m = document.createElement("div");
  m.className = "meta";
  m.textContent = text;
  chatBody.appendChild(m);
}

function send() {
  const q = input.value.trim();
  if (!q) return;

  addMsg("user", q);
  input.value = "";

  const ans = buildAnswer(q);
  addMsg("bot", ans);
}

sendBtn.onclick = send;

input.addEventListener("keydown", e => {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    send();
  }
});

function welcome() {
  addMsg("bot", "Hi, I’m Agent Kyle. Ask me anything about Kyle’s experience—Waymo, Narvar, Nasdaq, systems testing, customer success, or how he fits a role.");
  addMeta("Try: “What did Kyle do at Waymo?” or “Tell me about his strengths for a TPM role.”");
}

welcome();
</script>

</body>
</html>
